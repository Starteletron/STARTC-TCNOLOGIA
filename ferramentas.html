<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL  = "https://eyadhwehwhxfymsmqzlj.supabase.co";
const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5YWRod2Vod2h4Znltc21xemxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MzM0MTUsImV4cCI6MjA3NzEwOTQxNX0.IXpjHg-L3e70oYnP7ouf7w0E6g1LoKTWfOkXppJg3Qk";
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON);

async function requireAuth(){
  const { data:{ session } } = await supabase.auth.getSession();
  if(!session){ location.href = 'login.html'; return; }
  const { data, error } = await supabase
    .from('profiles')
    .select('status, role, name')
    .eq('id', session.user.id)
    .single();
  if(error || data?.status !== 'Ativo'){
    await supabase.auth.signOut();
    location.href = 'login.html';
    return;
  }
  // Aqui vocÃª pode personalizar a UI com data.role/name/email
  console.log('Bem-vindo:', session.user.email, data.role);
}
requireAuth();
</script>

