<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://SEU-PROJECT.supabase.co";
const SUPABASE_ANON = "SEU-ANON-KEY";
const supabase = supabasejs.createClient(SUPABASE_URL, SUPABASE_ANON);

async function requireAuth(){
  const { data:{ session } } = await supabase.auth.getSession();
  if(!session){ location.href = 'login.html'; return; }
  const { data, error } = await supabase
    .from('profiles')
    .select('status, role, name')
    .eq('id', session.user.id)
    .single();
  if(error || data?.status !== 'Ativo'){
    await supabase.auth.signOut();
    location.href = 'login.html';
    return;
  }
  // ok: personalize a UI com data.role/name/email
  const user = session.user;
  console.log('Bem-vindo:', user.email, data.role);
}
requireAuth();
</script>
